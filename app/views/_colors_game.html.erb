<div class="jumbotron" id="colors_game">
  <div class="section_header">
    <h2 class="section_title">Color Guessing Game</h2>
    <p>I built this game to learn to use CSS colors without looking
      them up.
    </p>
  </div>

  <h3 class="color_game_header" id="actual_color">Actual color: #??????</h3>
  <div class="container-fluid" id="colored_dot"></div>

  <h3 class="color_game_header" id="your_guess">Your gusss</h3>
  <div class="container-fluid" id="guess_dot"></div>

  <div id="color_game_inputs">
    <button type="button" class="btn btn-default color_game_button" onclick="guess_color()">Submit Color Guess</button>
    <input id="guess_field" class="color_game_button" placeholder="Color Guess (e.g. 3d66e9)"></input>
    <button type="button" class="btn btn-default color_game_button" onclick="start_color_game()">New Game</button>
  </div>

  <div id="color_game_feedback_section">
    <p id="off_by_red"></p>
    <p id="off_by_green"></p>
    <p id="off_by_blue"></p>
    <p id="off_by"></p>
  </div>
</div>

<script>
  function componentToHex(c) {
    var hex = c.toString(16);
    return hex.length == 1 ? "0" + hex : hex;
  }

  function rgbToHex(r, g, b) {
    return "#" + componentToHex(r) + componentToHex(g) + componentToHex(b);
  }

  function random_color() {
    color_string = "#"
    for (var i = 0; i < 6; i++) {
      color_string += Math.floor(Math.random() * 16).toString(16);
    }
    return color_string;
  }

  function guess_color() {
    actual_color = document.getElementById("colored_dot").style.backgroundColor;
    guess = "#" + document.getElementById("guess_field").value;
    document.getElementById("guess_dot").style.backgroundColor = guess;
    rgb = actual_color.replace(/[^\d,]/g, '').split(',');
    r = parseInt(rgb[0]);
    g = parseInt(rgb[1]);
    b = parseInt(rgb[2]);
    guess_r = parseInt(guess.slice(1,3), 16);
    guess_g = parseInt(guess.slice(3,5), 16);
    guess_b = parseInt(guess.slice(5,7), 16);
    red_diff = Math.abs(r - guess_r);
    green_diff = Math.abs(g - guess_g)
    blue_diff = Math.abs(b - guess_b);
    difference = red_diff + green_diff + blue_diff;
    document.getElementById("actual_color").innerHTML = "Color: " + rgbToHex(r,g,b);
    document.getElementById("your_guess").innerHTML = "Your guess: " + guess;
    document.getElementById("off_by_red").innerHTML = "Your red guess was off by: " + red_diff;
    document.getElementById("off_by_green").innerHTML = "Your green guess was off by: " + green_diff;
    document.getElementById("off_by_blue").innerHTML = "Your blue guess was off by: " + blue_diff;
    document.getElementById("off_by").innerHTML = "Your guess was off by: " +
      difference + " / 765 " + "(" + Math.round((parseInt(difference) / 765) * 100, 2) + "%)";

  }

  function start_color_game() {
    document.getElementById("guess_dot").style.backgroundColor = "#fff";
    document.getElementById("colored_dot").style.backgroundColor = random_color();
    document.getElementById("guess_field").value = "";
    document.getElementById("actual_color").innerHTML = "Color: #??????";
    document.getElementById("your_guess").innerHTML = "Your guess:";
    document.getElementById("off_by_red").innerHTML = "";
    document.getElementById("off_by_green").innerHTML = "";
    document.getElementById("off_by_blue").innerHTML = "";
    document.getElementById("off_by").innerHTML = "";
  }

  start_color_game()
</script>
